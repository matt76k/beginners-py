---
jupytext:
  formats: md:myst
  text_representation:
    extension: .md
    format_name: myst
    format_version: 0.13
    jupytext_version: 1.11.5
kernelspec:
  display_name: Python 3
  language: python
  name: python3
---
制御
====

逐次、分岐、反復の3つの制御について学びましょう。

プログラムが上から順番に実行されることを**逐次**と呼びます。
データのところで書いたプログラムで何度も見てきました。

ここでは確認のため、簡単な問題をやってみましょう。

空リストに`a`という変数名をつけ、
3、８、２、10という値を`a`に追加し、
2番目と3番目の値を足して、1番目の値を引いた結果を表示するプログラムを書いてみましょう。
このプログラムが書ければ、順次は理解しています。

````{dropdown} 解答例

```python
a = []
a.append(3)
a.append(8)
a.append(2)
a.append(10)
print(a[1] + a[2] - a[0])
```

````


## 分岐

分岐は、**条件**によって別々の命令を実行します。

実際に書いてみましょう。

```python
n = 0
if n < 0:
    print("nは")
    print("負")

print(n < 0)
```

このプログラムを日本語で表現すると、

```
nに0を代入
nが0より小さい場合は
  「nは」と表示
  「負」と表示
  
n < 0の結果を表示
```

となります。
nに色々な値を代入して、プログラムを実行してみましょう。

Pythonのプログラムで分岐を書くときのポイントは3つです。

1. 条件には`if`文を使う
2. 条件式の結果は`True`か`False`のどちらか
3. 条件ごとの処理は**インデント**する

条件によって処理を分けたい時、Pythonでは`if`というキーワードを使います。
`if`は特別な単語なので、`if`という名前の変数を作ることはできません。

`if`の後には、条件式を書きます。
この条件式の結果は`True`か`False`のどちらかになります。
この、`True`と`False`しかないデータの型は、**ブール型**と呼ばれます。
先ほどの例では、`n < 0`が条件式になります。
`<`は**比較演算子**と呼ばれています。nの値によって、`n < 0`の式が`True`か`False`になります。

`n`を色々変えてプログラムを実行してみると、最後の`print(n < 0)`の結果が`True`か`False`になっていることがわかります。
このように比較演算子の結果を出力として確認できます。

条件が`True`の場合は、`if`の下の行が実行されます。
この行のことを**ブロック**と呼び、インデント（ここではprintの前のスペース）が重要な意味を持ちます。 
インデントが同じ部分が、１つの塊（ブロック）として扱われるのです。 
ここでは、条件式が`True`の場合、インデントが同じである2つのprintが実行されます。

次に、`n`の値が偶数か奇数かを判定するプログラムを書いてみましょう。

```python
n = 10
if n % 2 == 0:
    print("偶数")
else:
    print("奇数")
```

`%`は、割り算の余りを求める演算子になります。
つまり、このプログラムを日本語で表現すると、

```
nに10を代入
もしnを2で割った余りが0の場合は
  偶数と表示
それ以外は
  奇数と表示
```

となります。
ここで使われる`==`は**等号**と呼ばれる比較演算子です。`==`は、左右の値が等しいかどうかを判定し、`True`か`False`を返します。

偶数奇数の判定プログラムに、`n`が42の場合は、「生命、宇宙、そして万物についての究極の疑問の答え」と表示するようにしてみましょう。

```python
n = 10

if n == 42:
  print("生命、宇宙、そして万物についての究極の疑問の答え")
elif n % 2 == 0:
  print("偶数です")
else:
  print("奇数です")
```

このように条件を増やす場合は、`elif`というキーワードを使います。
`n`に42を代入して実行してみると、「生命、宇宙、そして万物についての究極の疑問の答え」と表示されるのを確認しましょう。

さて、以下のプログラムはどうなるでしょうか？

```python
n = 42

if n % 2 == 0:
  print("偶数です")
elif n == 42:
  print("生命、宇宙、そして万物についての究極の疑問の答え")
else:
  print("奇数です")
```

これは、「偶数です」と表示されます。
なぜなら、条件式は順次に従って実行されるため、最初の`n % 2 == 0`の条件が`True`になり、`elif`の条件は実行されません。
if文を書くときは、順次に従って条件式が実行されることを意識しましょう。

## 反復

命令を繰り返し実行する**反復**について学びましょう。

```python
for i in range(10):
    print(i)
```

このプログラムを実行すると、0から9までの数字が表示されます。
繰り返しには`for`というキーワードを使います。
`for`の後には、繰り返しの時に使われる変数名を書きます。
`in`の後には、繰り返しの範囲を書きます。

このプログラムを日本語で表現すると、

```
0から9までの数字を順番にiに代入して、
  iの値を表示
```

ということになります。

繰り返しの範囲は`range`という関数を使って指定します。
`range`は、指定した数から1つずつ数を増やしながら、指定した数までの数列を作成します。
0からはじまっているのは、リストのインデックスが0からはじまるのと一緒ですね。

この形はしっかり覚えましょう！
繰り返しで何かしたいと思ったら、このプログラムが瞬時に頭に思い浮かぶようになりましょう。

では、このプログラムを変えて、1から10までの数字を表示するプログラムを書いてみましょう。

````{dropdown} 解答例

```python
for i in range(10):
    print(i + 1)
```

iは0から9までの数字が順番に代入されるので、`i + 1`とすることで、1から10までの数字が表示されます。

別解として、以下のように書くこともできます。
`range`の引数を2つにすると、最初が初期値になります。

```python
for i in range(1, 11):
    print(i)
```

````

繰り返しにはリストを使うこともできます。

```python
a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
for i in a:
    print(i)
```

このプログラムを実行すると、1から10までの数字が表示されます。

リストの値が1つずつ順番にiに代入され、インデントでグループ分けされたブロックが実行されます。

## 組み合わせ

ここまでで、逐次、分岐、反復の3つの制御について学びました。

これらを組み合わせることで、より複雑なプログラムを書くことができます。

では、1から11までの数字で、奇数のみを表示するプログラムを書いてみましょう。

````{dropdown} 解答例

```python
for i in range(11):
    if (i + 1) % 2 == 1:
        print(i + 1)
```

````

1から100までの数字の中で3と5の公倍数で4番目を表示するプログラムを`for`文を使って作ってみましょう。
この場合、繰り返しの中で、途中で処理を終了する必要があります。
途中で処理を終了するためには`break`文を使います。

```python
count = 0
for i in range(1, 101):
    if i % 3 == 0 and i % 5 == 0:
        count += 1
        if count == 4:
            print(i)
            break
```

このプログラムを日本語で表現すると、

```
カウントを0にする
1から100までの数字を順番にiに代入して、
  iが3と5の公倍数の場合は
    カウントを1増やす
    もしカウントが4になったら
      iを表示して、繰り返しを終了
```

となります。

繰り返しには`for`文以外に、`while`文を使うこともできます。

```python
for i in range(10):
    print(i)
```

このプログラムをwhile文で書くと、

```python
i = 0
while i < 10:
    print(i)
    i += 1
```

このようになります。

while文では、条件式が`True`の間、繰り返しを実行します。
while文を使うときは、繰り返しの中で、条件式がいつか`False`になるようにしないと、無限ループになってしまうことに注意しましょう。
ここでは、`i`に1を足しているので、10回目には`i`が10になり、条件式が`False`になります。